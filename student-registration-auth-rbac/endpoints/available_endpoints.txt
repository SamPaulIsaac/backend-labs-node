# 1. Register a new user (student or admin via role)
curl -X POST http://localhost:3000/auth/register \
  -H "Content-Type: application/json" \
  -d '{"name": "john", "email": "john@example.com", "password": "secret123", "role": "student"}'

# 2. Login and get JWT tokens (access + refresh)
curl -X POST http://localhost:3000/auth/login \
  -H "Content-Type: application/json" \
  -d '{"email": "john@example.com", "password": "secret123"}'

# 3. Create a new student (ADMIN ONLY - need admin token)
curl -X POST http://localhost:3000/students \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6NCwicm9sZSI6InN0dWRlbnQiLCJpYXQiOjE3NTQ2ODE5ODgsImV4cCI6MTc1NDY4Mjg4OH0.gjBYB3Q-uWTDifxtOlur7wvUtHmPVKEWhA8cVGHu3OU" \
  -d '{"name": "Alice", "email": "alice@example.com", "course": "Physics", "password": "alicepass", "role": "student"}'

# 4. Get all students (ADMIN ONLY)
curl http://localhost:3000/students \
  -H "Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6NCwicm9sZSI6InN0dWRlbnQiLCJpYXQiOjE3NTQ2ODE5ODgsImV4cCI6MTc1NDY4Mjg4OH0.gjBYB3Q-uWTDifxtOlur7wvUtHmPVKEWhA8cVGHu3OU"

# 5. Get student by ID (ADMIN or student themself)
curl http://localhost:3000/students/1 \
  -H "Authorization: Bearer ACCESS_TOKEN_HERE"

# 6. Update student by ID (ADMIN or student themself)
curl -X PUT http://localhost:3000/students/1 \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer ACCESS_TOKEN_HERE" \
  -d '{"name": "Alice Updated", "email": "alice.updated@example.com", "course": "Chemistry"}'

# 7. Delete student by ID (ADMIN ONLY)
curl -X DELETE http://localhost:3000/students/1 \
  -H "Authorization: Bearer ACCESS_TOKEN_HERE"

# 8. Refresh access token using refresh token
curl -X POST http://localhost:3000/auth/refresh \
  -H "Content-Type: application/json" \
  -d '{"refreshToken": "REFRESH_TOKEN_HERE"}'

# 9. Logout (invalidate refresh token)
curl -X POST http://localhost:3000/auth/logout \
  -H "Content-Type: application/json" \
  -d '{"refreshToken": "REFRESH_TOKEN_HERE"}'
